<!DOCTYPE html>
<!---
              _ ____________________
_|_________\\\\\\                  (_
 |                                   |
 |         eat_code_and_die          |
 |_                        __________|_
   )_______________________\         |

-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
          <title>↯–↯–GXRLS NEED MODEMS-↯–↯</title>
    <link rel="stylesheet" href="../style_commun.css">
    <script src="../jquery-3.7.1.min.js"></script>
    <script src="../script_commun.js"></script>


</head>
<body>


    <a href="../SCENE_ENTREE_ARENE/entree_arene.html" id="bigcarto">quitter le jardin -->
  	</a>

    <a href="../INVENTAIRE/inventaire.html" id="inventaire" >inventaire
    </a>

  
    <div id="letout">


    <div id="paysage" style="right: 0;">
        <pre ><script>document.include('txt/fond_jardin.txt');</script>
        </pre>
    </div>

    <div id="paysage_djinn" style="right: 0; display: none;">
        <pre ><script>document.include('txt/fond_jardin_djinn.txt');</script>
        </pre>
    </div>

    <div id="postale" style="top: -292.5px; cursor:zoom-in; " onclick="fonctionPostale()">
        <pre ><script>document.include('txt/driftcoremini.txt') ;</script>
        </pre>
    </div>

    <div id="oiseau" style="top: 200px; left: -284px; cursor:pointer; " onclick="animate_fontaine()">
        <pre ><script>document.include('txt/oiseau.txt') ;</script>
        </pre>
    </div>

    <div style="top: 185px; left: -236px;">
        <pre id="fontaine" style="height: 215.6px;"><script>document.include('txt/fontaine1.txt') ;</script>
        </pre>
    </div>

    <div style="top: 192.5px; left: 121px; cursor:pointer;" onclick="fonctionLanterne()">
        <pre id="lanterne"><script>document.include('txt/lanterne.txt') ;</script>
        </pre>
    </div>

    <div id="djinn" style="margin-top: 38px; margin-left: 261px; cursor:pointer; display: none;" onclick="fonctionDjinn1()">
      <pre><script>document.include('txt/djinn.txt') ;</script>
      </pre>
    </div>


<!--/////////GOODIES/////////-->
	<div style="top: 300px; left: -326px; cursor: pointer;" onclick="fonctionRose()">
        <pre id="rose"><script>document.include('txt/rose.txt') ;</script>
        </pre>
    </div>
    
    <div id="etoile" style="left:-175px; top: 280px; cursor: pointer;" onclick="fonctionPoignard()">
        <pre >*</pre>
    </div>


<!--///////////////////////PAGE POP UP///////////////////////////////////-->

<!--carte postale driftcore-->

	<div id="carte_driftcore" class="popup" style="cursor: zoom-out;">
		<pre class="pre_popup" ><script>document.include('txt/driftcore.txt')</script></pre>
	</div>


<!--citation rose-->

	<div id="rose_citation" class="popup">
		<pre class="pre_popup" ><script>document.include('txt/rose_citation.txt')</script></pre>
	</div>


<!--poignard-->

	<div id="poignard" class="popup">
		<pre class="pre_popup" ><script>document.include('txt/poignard.txt')</script></pre>
	</div>

<!--dialogue djinn-->

    <div id="dialogue_1" class="popup" style=" display:none;">
        <pre class="pe_popup" style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_1.txt')</script></pre>
        <button id="bouton_1_a" class="bouton_intro" onclick="fonctionDjinn2()" style="width: 124px; top:60px; left:-90px;">Tu sors d'où&nbsp;?</button>
        <button id="bouton_1_b" class="bouton_intro" onclick="fonctionDjinn2()" style="width: 160px; top:60px; left:90px;">C'est vrai qu'on y a mis de l'attention</button>
    </div>

    <div id="dialogue_2" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_2.txt')</script></pre>
        <button id="bouton_2_a" class="bouton_intro" onclick="fonctionDjinn3()" style="width: 122px; top:70px; left:-100px;">Dis-m'en plus</button>
        <button id="bouton_2_b" class="bouton_intro" onclick="fonctionDjinn3()" style="width: 135px; top:70px; left:100px;">Tu as quel âge&nbsp;?</button>
    </div>

    <div id="dialogue_3" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_3.txt')</script></pre>
        <button id="bouton_3" class="bouton_intro" onclick="fonctionDjinn4()" style="width: 222px; top:60px;">Tu as l'air de t'y connaître</button>
    </div>

    <div id="dialogue_4" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_4.txt')</script></pre>
        <button id="bouton_4" class="bouton_intro" onclick="fonctionDjinn5()" style="width: 207px; top:33px;">Tu travaillais à l'imprimerie, c'est ça&nbsp;?</button>
    </div>

    <div id="dialogue_5" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_5.txt')</script></pre>
    </div>


<!--///////////////////////FERMER PAGE///////////////////////////////////-->


  		<div id="tout_fermer" style="height:100vh; width: 100vw; z-index: 20; cursor: pointer; transform: translate(-50%, -50%); top: 50%; left: 50%; display: none;" onclick="tout_fermer()"></div>

        <div id="bloqueur" style="height:100vh; width: 100vw; z-index: 22; transform: translate(-50%, -50%); top: 50%; left: 50%; display: none;"></div>


	</div>

	</div>




 
    <script type="text/javascript">


    ///////////////////////ONLOAD////////////////////////////

    if(localStorage.getItem("lanterne_frotte") == "ok"){
        document.getElementById("paysage").style.display= "none";
        document.getElementById("paysage_djinn").style.display= "block";
        document.getElementById("djinn").style.display= "block";
        document.getElementById("lanterne").style.cursor= "auto";
    }

    if(localStorage.getItem("rose_citation") == "ok"){
        document.getElementById("rose").style.cursor= "auto";
    }

    if(localStorage.getItem("poignard") == "ok"){
        document.getElementById("etoile").style.cursor= "auto";
    }


    ///////////////////////POP UP///////////////////////////////////


    function fonctionPostale(){
       	$("#carte_driftcore").css('display','block');
        $("#tout_fermer").css('display','block');
            localStorage.setItem("driftcore", "ok"); 
    }

    function fonctionRose(){
    	if(localStorage.getItem("rose_citation") == "ok"){   
    	}else{
            $("#rose_citation").css('display','block');
            $("#tout_fermer").css('display','block');
            $("#rose").css('cursor', 'auto');
            localStorage.setItem("rose_citation", "ok"); 
     	}
 		}

 	function fonctionPoignard(){
    	if(localStorage.getItem("poignard") == "ok"){   
     	}else{
            $("#poignard").css('display','block');
            $("#tout_fermer").css('display','block');
            $("#etoile").css('cursor', 'auto');
            localStorage.setItem("poignard", "ok"); 
     		}
 		}

 	function fonctionLanterne(){
    	if(localStorage.getItem("lanterne_frotte") == "ok"){   		
    	}else{
            $("#djinn").css('display','block');
            $("#paysage").css('display','none');
            $("#paysage_djinn").css('display','block');
            $("#lanterne").css('cursor', 'auto');
            localStorage.setItem("lanterne_frotte", "ok"); 
     	}
 		}


    function fonctionDjinn1(){
        if(localStorage.getItem("intro_djinn") == "ok"){
            document.getElementById("dialogue_5").style.display= "block";
            document.getElementById("tout_fermer").style.display = "block";
        }else{
            document.getElementById("dialogue_1").style.display= "block";
            document.getElementById("bouton_1_a").style.display= "block";
            document.getElementById("bouton_1_b").style.display= "block";
        }
    }

    function fonctionDjinn2(){
        document.getElementById("dialogue_2").style.display= "block";   
        document.getElementById("bouton_2_a").style.display= "block";
        document.getElementById("bouton_2_b").style.display= "block";
        document.getElementById("bouton_1_a").style.display= "none";
        document.getElementById("bouton_1_b").style.display= "none";
        document.getElementById("dialogue_1").style.display= "none";
        document.getElementById("bloqueur").style.display = "block";
    }

    function fonctionDjinn3(){
        document.getElementById("dialogue_3").style.display= "block";   
        document.getElementById("bouton_3").style.display= "block";
        document.getElementById("bouton_2_a").style.display= "none";
        document.getElementById("bouton_2_b").style.display= "none";
        document.getElementById("dialogue_2").style.display= "none";
    }

    function fonctionDjinn4(){
        document.getElementById("dialogue_4").style.display= "block";   
        document.getElementById("bouton_4").style.display= "block";
        document.getElementById("bouton_3").style.display= "none";
        document.getElementById("dialogue_3").style.display= "none";
    }

    function fonctionDjinn5(){
        document.getElementById("dialogue_5").style.display= "block";   
        document.getElementById("bouton_4").style.display= "none";
        document.getElementById("dialogue_4").style.display= "none";
        document.getElementById("tout_fermer").style.display= "block";
        document.getElementById("bloqueur").style.display = "none";
        localStorage.setItem("intro_djinn", "ok"); 
    }


    function tout_fermer(){
        $("#tout_fermer").css('display', 'none');
        $(".popup").css('display', 'none');
        $("#dialogue_5").css('display', 'none');
    }


    ///////////////////////fontaine///////////////////////////////////
	var text_fontaine = [
		'txt/fontaine1.txt',
		'txt/fontaine2.txt',
	    'txt/fontaine3.txt',
	    'txt/fontaine4.txt',
	    'txt/fontaine5.txt',
		'txt/fontaine6.txt',
	    'txt/fontaine1.txt',
	    'txt/fontaine2.txt',
	    'txt/fontaine3.txt',
		'txt/fontaine4.txt',
	    'txt/fontaine5.txt',
	    'txt/fontaine6.txt',
	    'txt/fontaine1.txt',
	    'txt/fontaine2.txt',
	    'txt/fontaine3.txt',
		'txt/fontaine4.txt',
	    'txt/fontaine5.txt',
	    'txt/fontaine6.txt'
	];

	var counter_fontaine = 0;
	var preElement_fontaine = document.getElementById("fontaine");
	var textContents_fontaine = [];
	var timer_fontaine;

	// Preload all the text files using AJAX
	for (var i = 0; i < text_fontaine.length; i++) {
	    preloadText_fontaine(text_fontaine[i], i);
	}

	// Function to preload a text file and store its content
	function preloadText_fontaine(url, index) {
	    var request_fontaine = new XMLHttpRequest();
	    request_fontaine.open('GET', url, true);
	    request_fontaine.onreadystatechange = function () {
	        if (request_fontaine.readyState === XMLHttpRequest.DONE && request_fontaine.status === 200) {
	            textContents_fontaine[index] = request_fontaine.responseText;
	        }
	    };
	    request_fontaine.send();
	}

	function animate_fontaine() {
	    if (counter_fontaine < text_fontaine.length) {
	        preElement_fontaine.textContent = textContents_fontaine[counter_fontaine];
	        counter_fontaine++;
	        timer_fontaine = setTimeout(animate_fontaine, 50);
	    } else {
	        // Reset the animation to the initial state
	        counter_fontaine = 0;
	        preElement_fontaine.textContent = textContents_fontaine[counter_fontaine];
	    }
	}


    </script>




</body>
</html>
